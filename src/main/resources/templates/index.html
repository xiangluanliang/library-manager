<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Guo书 - 登录</title>

    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
    <style>
        body {
            background: url("/images/background.jpg") no-repeat center center fixed;
            background-size: cover;
            font-family: "Microsoft YaHei", sans-serif;
        }

        #login_form {
            width: 500px;
            padding: 40px;
            margin: 100px auto;
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }

        h1 {
            text-align: center;
            color: #5a3e85;
            margin-bottom: 20px;
            font-size: 28px;
        }

        h2 {
            text-align: center;
            color: #333;
            font-size: 20px;
            margin-bottom: 30px;
        }

        .layui-form-label {
            width: 100px;
        }

        .layui-input-block {
            margin-left: 120px;
        }

        .layui-btn {
            width: 100%;
            height: 42px;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div id="wrapper">
    <div class="layui-container" id="login_form">

        <h1>Guo书 - 图书管理系统</h1>
        <h2>欢迎登录</h2>

        <form class="layui-form" id="my_form" method="post" action="/userLogin">

            <div class="layui-form-item">
                <label class="layui-form-label">用户名:</label>
                <div class="layui-input-block">
                    <input type="text" name="userName" id="username" autofocus placeholder="请输入用户名" autocomplete="off" class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">密 码:</label>
                <div class="layui-input-block">
                    <input type="password" name="password" id="password" placeholder="请输入密码" autocomplete="off" class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">用户身份:</label>
                <div class="layui-input-block">
                    <input type="radio" name="role" value="1" title="学生" checked>
                    <input type="radio" name="role" value="0" title="管理员">
                </div>
            </div>

            <div class="layui-form-item">
                <button id="sub_btn" class="layui-btn layui-btn-normal">登 录</button>
            </div>
        </form>
    </div>
</div>

<script th:src="@{/scripts/jquery.min.js}"></script>
<script th:src="@{/layui/layui.js}"></script>

<script th:inline="javascript">
    layui.use(['layer', 'form'], function () {
        let layer = layui.layer;
        let form = layui.form;
        form.render();

        $(function () {
            let flag = [[${session.flag}]];
            if (flag) {
                layer.msg("用户名或密码错误", {
                    icon: 2,
                    time: 2000
                });
            }
        });
    });

    $("#sub_btn").click(function (e) {
        e.preventDefault(); // 阻止默认提交
        let username = $("#username").val();
        let password = $("#password").val();
        let role_id = $('input[name="role"]:checked').val();

        if (!username.trim()) {
            layer.alert("用户名不能为空", {icon: 5});
            return false;
        }

        if (!password.trim()) {
            layer.alert("密码不能为空", {icon: 5});
            return false;
        }

        $("#my_form").attr("action", "/login").submit();
    });
</script>

</body>
</html>
